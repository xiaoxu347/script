-- 获取玩家
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- 获取身体部分
local humanoid = character:FindFirstChildOfClass("Humanoid")
local rootPart = character:FindFirstChild("HumanoidRootPart")

-- 设定漂浮参数
local floatHeight = 10 -- 漂浮高度
local isFloating = false -- 控制是否漂浮

-- 创建用于漂浮的BodyPosition和BodyGyro
local bodyPosition = Instance.new("BodyPosition", rootPart)
local bodyGyro = Instance.new("BodyGyro", rootPart)

bodyPosition.MaxForce = Vector3.new(0, math.huge, 0) -- 仅在y轴上施加力
bodyPosition.Damping = 10
bodyGyro.MaxTorque = Vector3.new(math.huge, math.huge, math.huge) -- 允许沿所有轴旋转
bodyGyro.D = 10

-- 初始化为面朝天的姿势
bodyGyro.CFrame = rootPart.CFrame * CFrame.Angles(math.rad(90), 0, 0)

-- 漂浮逻辑
local function startFloating()
    if not isFloating then
        isFloating = true

        -- 设定目标高度
        bodyPosition.Position = rootPart.Position + Vector3.new(0, floatHeight, 0)

        -- 将玩家的动画关闭（防止游泳等动画影响）
        if humanoid:FindFirstChild("Animator") then
            humanoid.Animator:Destroy()
        end

        -- 防止玩家移动
        humanoid.PlatformStand = true
    end
end

local function stopFloating()
    if isFloating then
        isFloating = false

        -- 恢复原来的状态
        humanoid.PlatformStand = false
        bodyPosition:Destroy()
        bodyGyro:Destroy()
    end
end

-- 让玩家漂浮并面朝天躺下
startFloating()

-- 设置10秒后停止漂浮
wait(10)
stopFloating()
