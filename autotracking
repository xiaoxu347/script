local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

-- 获取本地玩家和摄像机
local localPlayer = Players.LocalPlayer
local character = localPlayer.Character or localPlayer.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local camera = Workspace.CurrentCamera

-- 设置跟踪的目标玩家名字
local targetPlayerName = "yaoshen21"  -- 将此处替换为你要跟踪的玩家名字

-- 确保目标玩家存在并且有角色生成
local function trackPlayer()
    local targetPlayer = Players:FindFirstChild(targetPlayerName)

    if targetPlayer then
        local targetCharacter = targetPlayer.Character or targetPlayer.CharacterAdded:Wait()

        -- 持续更新，进行跟踪并调整摄像机
        RunService.RenderStepped:Connect(function()
            if targetCharacter and targetCharacter:FindFirstChild("HumanoidRootPart") then
                local targetPosition = targetCharacter.HumanoidRootPart.Position

                -- 玩家角色跟踪移动
                humanoid:MoveTo(targetPosition)

                -- 更新摄像机位置，让摄像机跟随目标玩家
                camera.CameraType = Enum.CameraType.Scriptable  -- 切换到脚本控制模式
                local cameraOffset = Vector3.new(0, 10, -20)  -- 调整摄像机偏移量
                local cameraPosition = targetPosition + cameraOffset
                camera.CFrame = CFrame.new(cameraPosition, targetPosition)
            end
        end)
    else
        warn("未找到目标玩家: " .. targetPlayerName)
    end
end

-- 当玩家角色加载完毕后开始跟踪
if character then
    trackPlayer()
else
    localPlayer.CharacterAdded:Connect(trackPlayer)
end
