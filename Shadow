-- 获取服务
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

-- 获取当前玩家
local localPlayer = Players.LocalPlayer
local char = localPlayer.Character or localPlayer.CharacterAdded:Wait()

-- 获取目标玩家（假设名字是TargetPlayerName）
local targetPlayer = Players:FindFirstChild("yaoshen21")

-- 如果目标玩家存在且有角色
if targetPlayer and targetPlayer.Character then
    local targetChar = targetPlayer.Character
    local targetHumanoidRootPart = targetChar:WaitForChild("HumanoidRootPart")
    local localHumanoidRootPart = char:WaitForChild("HumanoidRootPart")

    -- 创建更新玩家位置的函数
    local function updatePosition()
        if targetHumanoidRootPart and localHumanoidRootPart then
            -- 获取目标玩家的 CFrame，并调整位置为其下方
            local targetCFrame = targetHumanoidRootPart.CFrame
            local offsetY = 5 -- 漂浮距离

            -- 设置当前玩家的位置到目标玩家的下方
            local newPosition = targetCFrame.Position - Vector3.new(0, offsetY, 0)

            -- 创建一个让角色朝上的旋转 CFrame
            local faceUpRotation = CFrame.Angles(math.rad(90), 0, 0)  -- 旋转90度使角色面朝上

            -- 将位置和旋转应用到当前玩家的 HumanoidRootPart
            localHumanoidRootPart.CFrame = CFrame.new(newPosition) * faceUpRotation
        end
    end

    -- 每帧更新玩家位置
    RunService.RenderStepped:Connect(updatePosition)
end
